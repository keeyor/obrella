<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org" lang="">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>OpenDelos Live</title>
    <!-- CoreUI CSS -->
    <link rel="stylesheet" th:href="@{/lib/coreui/coreui.min.css}"/>
    <link rel="stylesheet" th:href="@{/lib/coreui/free.min.css}"/>

    <link rel="stylesheet" type="text/css" th:href="@{/css/wcag/wcag.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/font-css/delos.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/delos/search.css}"/>

    <link rel="stylesheet" type="text/css" th:href="@{/css/fontawesome/css/all.min.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/lib/datatables-classic/datatables.min.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/select2/css/select2.min.css}"/>
    <!-- alertify -->
    <link rel="stylesheet" th:href="@{/lib/alertify/css/alertify.min.css}"/>
    <link rel="stylesheet" th:href="@{/lib/alertify/css/themes/bootstrap.min.css}"/>
    <style>
        body {
            height: 100%;
            font-size: 0.75em;
        }
        .table td {
            padding: 0.1rem;
        }
        .dropdown-submenu {
            position: relative;
        }
        .dropdown-submenu a::after {
            transform: rotate(-90deg);
            position: absolute;
            right: 6px;
            top: .8em;
        }

        .dropdown-submenu .dropdown-menu {
            top: 0;
            left: 100%;
            margin-left: .1rem;
            margin-right: .1rem;
        }

        .example-date {
            float:right;
            margin-left:10px;
            padding:45px 5px 0;
            position:relative;
        }
        .day {
            font-size:2em;
            font-weight: bolder;
            left:auto;
            line-height:40px;
            position:absolute;
            top:0;
        }
        .month {
            font-size:20px;
            text-transform:uppercase;
        }
        .full_date {
            font-size:12px;
            text-transform:uppercase;
            position:absolute;
            top:40px;
            right:auto;
        }
        .year {
            -webkit-transform: rotate(-90deg);
            -moz-transform: rotate(-90deg);
            filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
            display:block;
            font-size:1.1em;
            position:absolute;
            right:15px;
            top:12px;
        }

    </style>
</head>
<body class="c-app">
<div th:replace="~{admin/fragments/a-sidebar :: a-sidebar}"></div>
<div class="c-wrapper">
    <div th:replace="~{admin/fragments/a-header :: a-header('Ζωντανές Μεταδόσεις')}"></div>
    <div class="justify-content-between">
        <form id="search-form" th:object="${resourceQuery}" th:action="@{/admin/scheduler/live}" method="post">
            <input type="hidden" id="departmentId"  th:field="*{departmentId}" />
            <input type="hidden" id="schoolId"      th:field="*{schoolId}" />
            <input type="hidden" id="courseId"      th:field="*{courseId}" />
            <input type="hidden" id="eventId"       th:field="*{eventId}" />
            <input type="hidden" id="staffId"       th:field="*{staffMemberId}" />
            <input type="hidden" id="categoryCode"  th:field="*{categoryCode}" />
            <input type="hidden" id="accessPolicy"  th:field="*{accessPolicy}" />
            <input type="hidden" id="resourceType"  th:field="*{resourceType}" />
            <input type="hidden"                    th:field="*{period}" />
            <input type="hidden"                    th:field="*{academicYear}" />
            <input type="hidden"                    th:field="*{skip}" />
            <input type="hidden" id="sortField"     th:field="*{sort}" />
            <input type="hidden" id="directionField" th:field="*{direction}" />
            <input type="hidden"                    th:field="*{totalResults}"/>
            <input type="hidden" id="tag"           th:field="*{tag}"/>

            <span th:if="${resourceQuery.categoryCode != null && resourceQuery.categoryCode != ''}">
                    <input type="hidden" id="categoryTitle" th:value="#{${resourceQuery.categoryCode}}" />
            </span>

            <div th:replace="~{admin/fragments/live/a-search-nav :: a-search-nav}"></div>
        </form>
    </div>
    <div class="justify-content-between pl-2">
        <div th:if="${queryString != null && queryString != ''}">
            <span class="pl-3" th:text="${'Βρέθηκαν ' + QR.totalResults + ' αποτελέσματα (' + PageLoadTime + ' ms)'}"></span>
        </div>
    </div>

    <div class="c-body">
        <main class="c-main">
            <!-- @thymesVar id="QR" type="org.opendelos.dashboard.repository.resource.QueryResourceResults"-->
            <!-- @thymesVar id="queryString" type="java.lang.String" -->
            <input type="hidden" id="queryString"  th:value="${queryString}" />

            <span th:if="${queryString != null && queryString != ''}">
                 <input id="departmentFilterId"         type="hidden" th:value="${departmentFilter.id}"/>
                 <input id="departmentFilterText"       type="hidden" th:value="${departmentFilter.text}"/>
                 <input id="courseFilterId"             type="hidden" th:value="${courseFilter.id}"/>
                 <input id="courseFilterText"           type="hidden" th:value="${courseFilter.text}"/>
                 <input id="staffMemberFilterId"        type="hidden" th:value="${staffMemberFilter.id}"/>
                 <input id="staffMemberFilterText"      type="hidden" th:value="${staffMemberFilter.text}"/>
                 <input id="scheduledEventFilterId"     type="hidden" th:value="${scheduledEventFilter.id}"/>
                 <input id="scheduledEventFilterText"   type="hidden" th:value="${scheduledEventFilter.text}"/>
            </span>
            <div class="card mx-3">
                <div class="card-body">
                    <!-- TABS -->
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link  active" id="live-tab" data-toggle="tab" href="#t-live" role="tab" aria-controls="t-live" aria-selected="true">
                               Ζωντανές Μεταδόσεις
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="stats-tab" data-toggle="tab" href="#t-stats" role="tab" aria-controls="t-stats" aria-selected="false">
                                Στατιστικά
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="today-tab" data-toggle="tab" href="#t-today" role="tab" aria-controls="t-today" aria-selected="false">
                                Ημερήσιο Πρόγραμμα
                            </a>
                        </li>
                    </ul>
                    <!-- Main content here -->
                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade  show active" id="t-live" role="tabpanel" aria-labelledby="live-tab">
                            <div class="row pl-1">
                                <div class="col-12">
                                    <div th:replace="~{admin/fragments/live/live-query-results :: live-query-results}">R-LIVE-CONTENT</div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade  show" id="t-stats" role="tabpanel" aria-labelledby="stats-tab">
                            <div class="row pl-3">
                                <div class="col-12 pt-3">
                                    <h5>Συγκεντρωτικά Ημέρας</h5>
                                </div>
                            </div>
                            <div class="row pl-3">
                                    <div class="col-2 pt-3">
                                        <div class="c-callout c-callout-info">
                                            <small class="text-muted">Προγραμματισμένες Μεταδόσεις Ημέρας</small><br>
                                            <strong class="h4" id="td_no">-</strong>
                                        </div>
                                    </div>
                                    <div class="col-2 pt-3">
                                        <div class="c-callout c-callout-primary">
                                            <small class="text-muted"> Προγραμματισμένες Μεταδόσεις Διαλέξεων</small><br>
                                            <strong class="h4" id="td_lectures">-</strong>
                                        </div>
                                    </div>
                                    <div class="col-2 pt-3">
                                        <div class="c-callout c-callout-warning">
                                            <small class="text-muted">Προγραμματισμένες Μεταδόσεις Εκδηλώσεων</small><br>
                                            <strong class="h4" id="td_events">-</strong>
                                        </div>
                                    </div>
                            </div>
                            <div class="row pl-3">
                                <div class="col-12 pt-3">
                                    <h5>Τμήματα</h5>
                                </div>
                            </div>
                            <div class="row pl-3">
                                <div class="col-12 pt-3">
                                    <h5>Στατιστικά ανά Μετάδοση</h5>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade  show" id="t-today" role="tabpanel" aria-labelledby="today-tab">
                             <div class="row">
                                 <div class="col-3">
                                     <div class="row pl-3">
                                         <div class="col-12" id="sort-main-col">
                                             <div th:replace="~{admin/fragments/live/u-applied-filters :: u-applied-filters}">Applied Filters</div>
                                         </div>
                                     </div>
                                     <div class="row pl-3">
                                         <div class="col-12" id="filters-columns">
                                             <div class="mt-3" id="sort-left-col">
                                                 <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-filter-square" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                     <path fill-rule="evenodd" d="M14 1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                                                     <path fill-rule="evenodd" d="M6 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/>
                                                 </svg>
                                                 <span>Δυναμικά Φίλτρα *</span>
                                                 <span id="QueryReportStatus" class="text-muted">
                                                (σε εξέλιξη <img width="16px" height="16px" th:src="@{/public/images/icons/icon_loading.gif}" alt="" src=""> )
                                            </span>
                                             </div>
                                             <div>
                                                 <div th:if="${QR.totalResults > 0}">
                                                     <span th:replace="~{admin/fragments/live/u-dyna-filters :: u-dyna-filters}"></span>
                                                 </div>
                                             </div>
                                         </div>
                                     </div>
                                 </div>
                                 <div class="col-9">
                                     <div class="row">
                                         <div class="col-12">
                                             <div th:replace="~{admin/fragments/live/u-sort-and-display :: u-sort-and-display}"></div>
                                         </div>
                                     </div>
                                     <div class="row">
                                         <div class="col-12">
                                              <span th:if="${QR.skip > 1000}">
                                                  Δεν επιτρέπεται η εξυπηρέτηση περισσότερων από 1000 αποτελεσμάτων τη φορά. Περιορίστε τον αριθμό των αποτελεσμάτων προσθέτοντας νέα κριτήρια αναζήτησης
                                                  (Ζητήσατε αποτελέσματα μετά τα <span th:text="${QR.skip}"></span>)
                                              </span>
                                             <div th:unless="${QR.skip > 1000}">
                                                 <div th:replace="~{admin/fragments/live/u-query-results :: u-query-results}">R-MAIN-CONTENT</div>
                                             </div>
                                         </div>
                                     </div>
                                     <!-- Pager -->
                                     <div class="row my-3">
                                         <div class="col-12 text-center">
                                             <div th:replace="~{fragments/search-common/u-pager :: u-pager}">Pager</div>
                                         </div>
                                     </div>
                                 </div>
                             </div>
                        </div>
                    </div>

                </div>
            </div>
        </main>
    </div>
    <footer class="c-footer">
        <!-- Footer content here -->
    </footer>
</div>
<div th:replace="~{modals/resource_view_modal :: resource_view_modal}"></div>
<div th:replace="~{admin/video-editor/modals/play_edited_modal :: play_edited_modal}"></div>
<div th:replace="~{modals/logout_modal :: #logout_modal}"></div>

<!-- Optional JavaScript -->
<script th:src="@{/css/jquery-3.5.1/jquery-3.5.1.js}" type="application/javascript"></script>
<script th:src="@{/lib/coreui/coreui.bundle.min.js}"></script>
<script th:src="@{/lib/coreui/coreui-utilities.min.js}"></script>

<script th:src="@{/lib/datatables-classic/datatables.min.js}" type="application/javascript"></script>
<script th:src="@{/lib/datatables-classic/sum().js}" type="application/javascript"></script>

<script th:src="@{/css/select2/js/select2.js}" type="application/javascript"></script>

<!-- alertify -->
<script th:src="@{/lib/alertify/alertify.min.js}"></script>

<script th:src="@{/js/pages/live/dashboard.js}" type="application/javascript"></script>
<script th:src="@{/js/pages/live/dashboard.schools.js}" type="application/javascript"></script>
<script th:src="@{/js/pages/live/dashboard.departments.js}" type="application/javascript"></script>
<script th:src="@{/js/pages/live/dashboard.categories.js}" type="application/javascript"></script>
<script th:src="@{/js/pages/live/dashboard.course.js}" type="application/javascript"></script>
<script th:src="@{/js/pages/live/dashboard.staffmembers.js}" type="application/javascript"></script>
<script th:src="@{/js/pages/live/dashboard.sevents.js}" type="application/javascript"></script>
<script th:src="@{/js/pages/live/dashboard.afilters.js}" type="application/javascript"></script>

<script th:src="@{/js/search/el.js}" type="application/javascript"></script>

<script th:src="@{/css/moment/moment.min.js}" type="text/javascript" ></script>
<script th:src="@{/css/moment/en-gb.js}" type="text/javascript" ></script>
<script th:src="@{/css/moment/el.js}" type="text/javascript" ></script>
</body>
</html>
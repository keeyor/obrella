<!DOCTYPE html>
<html lang="" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org" >

<!--@thymesVar id="QR" type="org.opendelos.dashboard.repository.resource.QueryResourceResults"-->
<div th:fragment="u-query-results">
    <div th:each="lecture, iStat: ${QR.searchResultList}" th:style="${iStat.odd}? ''">
                                <div class="row row-style player_tab">
                                    <div class="col-lg-1 col-md-2 col-sm-2 col-xs-2 px-0" style="text-align: center" >
                                        <div th:if="${T(org.opendelos.dashboard.services.resource.ResourceUtils).formatLiveTime(lecture.date, lecture.realDuration) == 'past'}">
                                            <div class="live_day" style="color:silver" th:text="${#temporals.format(lecture.date, 'HH:mm')}"></div>
                                            <div class="fas fa-check mt-3" style="font-size: 18px"></div>
                                        </div>
                                        <div th:if="${T(org.opendelos.dashboard.services.resource.ResourceUtils).formatLiveTime(lecture.date, lecture.realDuration) == 'live'}">
                                            <div class="live_day"  style="color:red" th:text="${#temporals.format(lecture.date, 'HH:mm')}"></div>
                                            <div class="icon-live-lecture" style="color: red;font-size: 22px"></div>
                                        </div>
                                        <div th:if="${T(org.opendelos.dashboard.services.resource.ResourceUtils).formatLiveTime(lecture.date, lecture.realDuration) == 'future'}">
                                            <div class="live_day"  th:text="${#temporals.format(lecture.date, 'HH:mm')}"></div>
                                            <div class="icon-scheduled" style="color:green;font-size: 16px"></div>
                                        </div>
                                    </div>
                                    <div class="col-lg-8 col-md-10 col-sm-10 col-xs-10">
                                        <div style="color:#006A9B">
                                            <span style="font-weight: bolder" th:text="${iStat.count + '.'}"></span>
                                            <strong><span style="font-size: 1.1em" th:text="${lecture.title}"></span></strong>
                                            <span th:if="${lecture.course != null}" class="mb-2" style="font-weight: 600">
                                                                            <span th:text="${'[' + lecture.supervisor.name}"></span>
                                                                </span>
                                            <span th:if="${lecture.course != null}" class="mb-2">
                                                                            <span th:text="${', ' + lecture.supervisor.affiliation + ']'}"></span>
                                                                </span>
                                            <span th:if="${lecture.partNumber != 0}">
                                                                             <span th:text="${'- Μέρος ' + lecture.partNumber}"></span>
                                                                </span>
                                        </div>
                                        <div th:if="${lecture.course != null}" class="mb-2">
                                            <span class="course_item" th:text="${lecture.course.title + ',' + ' Τμήμα ' + lecture.department.title}"></span>
                                            <div style="font-weight: normal;font-style: italic" class="text-muted mt-2">
                                                <i class="fas fa-quote-left fa-pull-left"></i>
                                                <span th:text="${(#strings.trim(lecture.description) != '' && lecture.description != null) ? lecture.description:'χωρίς περιγραφή'}"></span>
                                            </div>
                                        </div>
                                        <div th:if="${lecture.getEvent != null}" class="mb-2">
                                            <i class="icon-event" style="color: #555555" title="εκδήλωση"></i><span  class="font-italic"  th:text="${lecture.getEvent.title}"></span>
                                            <div th:if="${lecture.getEvent.responsibleUnit != null}" style="color:black;font-style: italic" class="text-muted ml-1">
                                                     <span th:each="unit,iStat: ${lecture.getEvent.responsibleUnit}">
                                                         <span th:text="${iStat.first}? '' : ', '"></span>
                                                         <span th:if="${#strings.trim(unit.structureType) == 'DEPARTMENT'}"> Τμήμα</span>
                                                         <span th:if="${#strings.trim(unit.structureType) == 'SCHOOL'}"> Σχολή </span>
                                                         <span th:text="${unit.title + ' '}"></span>
                                                     </span>
                                            </div>
                                            <div style="font-weight: normal;font-style: italic" class="text-muted mt-2">
                                                <i class="fas fa-quote-left fa-pull-left"></i>
                                                <span th:text="${(#strings.trim(lecture.description) != '' && lecture.description != null) ? lecture.description:'χωρίς περιγραφή'}"></span>
                                            </div>
                                        </div>
                                        <div class="mt-3">
                                                <span th:if="${lecture.broadcast}">
                                                    <img width="16px" th:src="@{/public/images/icons/IconMetadosiOn.png}" alt="" src=""> Μετάδοση -
                                                </span>
                                            <span th:unless="${lecture.broadcast}">
                                                   <img width="16px" th:src="@{/public/images/icons/IconMetadosiOff.png}" alt="" src=""> Χωρίς Μετάδοση
                                                </span>
                                            <span th:if="${lecture.access == 'open'}">
                                                    <i class="fas fa-lock-open"></i> Ανοικτή
                                                </span>
                                            <span th:if="${lecture.access == 'sso'}">
                                                    <i class="fas fa-lock"></i> Ιδρυματικό Λογαριασμό
                                                </span>
                                            <span th:if="${lecture.access == 'password'}">
                                                    <i class="fas fa-lock"></i> Κωδικό
                                                </span> |
                                            <span th:if="${lecture.recording}">
                                                    <img width="16px" th:src="@{/public/images/icons/IconRecAuto.png}" alt="" src=""> Καταγραφή
                                            </span>
                                            <span th:unless="${lecture.recording}">
                                                   <img width="16px" th:src="@{/public/images/icons/IconRecOff.png}" alt="" src=""> Χωρίς Καταγραφή
                                            </span>
                                            <br/>
                                            <b>Έναρξη: </b>
                                            <div th:replace="fragments/format-resource-date.html:: formatDateTime (field=${lecture.date})"></div> |
                                            <b>Διάρκεια: </b>
                                            <span th:text="${lecture.realDuration}" title="διάρκεια"></span> |
                                            <b>Αίθουσα/Χώρος: </b>
                                            <span th:text="${lecture.classroomName}" title="αίθουσα/χώρος"></span>
                                        </div>
                                    </div>
                                    <div class="col-lg-3 col-md-12 col-sm-12 col-xs-12 mt-3 px-0">
                                        <div th:if="${T(org.opendelos.dashboard.services.resource.ResourceUtils).formatLiveTime(lecture.date, lecture.realDuration) == 'live'}">
                                            <div th:if="${lecture.broadcast}">
                                                <a role="button" title="Προβολή ζωντανής μετάδοσης"  class="btn blue-btn-wcag-bgnd-color mt-1 play_live" style="width: 100%;color: whitesmoke;display: none;font-size: 0.9em;"
                                                    target="_blank"
                                                   href="#" th:href="@{/live_player(id=${lecture.id})}">
                                                    <i class="fas fa-play"></i> Αναπαραγωγή
                                                </a>
                                            </div>
                                            <div>
                                                <a role="button" title="έκτακτη διακοπή μετάδοσης" class="btn blue-btn-wcag-bgnd-color mt-1  stop_live"
                                                   style="width: 100%;color: whitesmoke;display: none;font-size: 0.9em;" target="_blank"
                                                   href="#" th:attr="data-target=${lecture.id},data-rec=${lecture.recording},data-title=${lecture.title}">
                                                    <i class="fas fa-stop" style="color: red"></i> Διακοπή
                                                </a>
                                            </div>
                                        </div>
                                        <div th:if="${T(org.opendelos.dashboard.services.resource.ResourceUtils).formatLiveTime(lecture.date, lecture.realDuration) == 'future'}">
                                            <div>
                                                <a role="button" title="έκτακτη ακύρωση μετάδοσης"  class="btn blue-btn-wcag-bgnd-color mt-1 cancel_future"
                                                   style="width: 100%;color: whitesmoke;display: none;font-size: 0.9em;" target="_blank"
                                                   th:attr="data-target=${lecture.scheduleId},data-date=${lecture.date},data-title=${lecture.title}"
                                                   href="#" >
                                                    <i class="fas fa-ban" style="color: orange"></i> Ακύρωση
                                                </a>
                                            </div>
                                            <div>
                                                <a role="button" title="Διαχείριση της Μετάδοσης" class="btn blue-btn-wcag-bgnd-color mt-1"
                                                   style="width: 100%;color: whitesmoke;display: none;font-size: 0.9em;"
                                                   th:href="@{/admin/scheduler/schedule(id=${lecture.scheduleId})}" target="_blank">
                                                    <i class="fas fa-edit"></i> Επεξεργασία
                                                </a>
                                            </div>
                                        </div>
                                        <div th:if="${T(org.opendelos.dashboard.services.resource.ResourceUtils).formatLiveTime(lecture.date, lecture.realDuration) == 'past'}">
                                            <div th:if="${lecture.recording}">
                                                <div th:if="${lecture.type == 'EVENT'}">
                                                    <a role="button" title="Αναζήτηση Καταγραφής"  class="btn blue-btn-wcag-bgnd-color  mt-1 play_vod"
                                                       style="width: 100%;color: whitesmoke;display: none;font-size: 0.9em;" target="_blank"
                                                       href="#" th:href="@{/admin/search(e=${lecture.getEvent.id},dt=${#temporals.format(lecture.date, 'yyyy-MM-dd')})}">
                                                        <i class="fas fa-search mr-1"></i>Αναζήτηση Καταγραφής
                                                    </a>
                                                </div>
                                                <div th:if="${lecture.type == 'COURSE'}">
                                                    <a role="button" title="Αναζήτηση Καταγραφής"  class="btn blue-btn-wcag-bgnd-color  mt-1 play_vod"
                                                       style="width: 100%;color: whitesmoke;display: none;font-size: 0.9em;" target="_blank"
                                                       href="#" th:href="@{/admin/search(d=${lecture.department.id},c=${lecture.course.id},dt=${#temporals.format(lecture.date, 'yyyy-MM-dd')})}">
                                                        <i class="fas fa-search mr-1"></i>Αναζήτηση Καταγραφής
                                                    </a>
                                                </div>
                                            </div>

                                        </div>
                                        <div>
                                            <a role="button" title="πληροφορίες μετάδοσης" class="btn blue-btn-wcag-bgnd-color  mt-1 broadcast_info"
                                               style="width: 100%;color: whitesmoke;display: none;font-size: 0.9em;"
                                               href="#" th:attr="data-editor=${lecture.editor.name},data-server=${lecture.streamingServerInfo},data-title=${lecture.title}">
                                                <i class="fas fa-info"></i> Πληροφορίες
                                            </a>
                                        </div>
                                    </div>
                                </div>
    </div>
</div>

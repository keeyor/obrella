<!DOCTYPE html>
<html lang="" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org" >

<!--@thymesVar id="QR" type="org.opendelos.dashboard.repository.resource.QueryResourceResults"-->
<div th:fragment="u-query-results">
    <div th:each="lecture, iStat: ${QR.searchResultList}"
                         th:style="${iStat.odd}? ''">
                         <div class="row">
                            <div class="col-12">
                                <div class="row row-style">
                                    <div class="col-lg-2 col-md-12" style="min-width: 75px;background-color: #F5F5F5">
                                        <div class="text-center pt-2" style="font-size: 1.4em;font-weight: bold" th:text="${#temporals.format(lecture.date, 'dd')}"></div>
                                        <div class="text-center mt-0" th:text="${#temporals.format(lecture.date, 'MMM')}"></div>
                                        <div class="text-center mt-0" th:text="${#temporals.format(lecture.date, 'YYYY')}"></div>
                                    </div>
                                    <div class="col-lg-7 col-md-12">
                                        <div style="font-size: 1.2em;color:#005cbf">
                                            <span th:if="${#strings.substringBefore(lecture.title,'(') != null}">
                                                            <span th:text="${#strings.substringBefore(lecture.title,'(')}"></span>
                                             </span>
                                            <span th:unless="${#strings.substringBefore(lecture.title,'(') != null}">
                                                            <span th:text="${lecture.title}"></span>
                                             </span>
                                            <span th:if="${lecture.partNumber != 0}">
                                                         <span th:text="${' / Μέρος ' + lecture.partNumber}"></span>
                                                     </span>
                                            <span th:if="${lecture.course != null}" style="font-size: 1.0em" class="mb-2 font-weight-bolder">
                                                        <span th:text="${'(' + lecture.supervisor.name}"></span>
                                                    </span>
                                            <span th:if="${lecture.course != null}" style="font-size: 1.0em" class="mb-2">
                                                        <span th:text="${', ' + lecture.supervisor.affiliation + ')'}"></span>
                                                    </span>
                                        </div>
                                        <div th:if="${lecture.course != null}" class="mb-2 font-weight-bolder">
                                            <span th:text="${lecture.course.title + ',' + ' Τμήμα ' + lecture.department.title}"></span>
                                            <div th:text="${lecture.description}"  style="font-weight: normal;font-style: italic" class="text-muted mt-2"></div>
                                            <div class="mt-3">
                                                <b>Εξάμηνο: </b><span th:text="#{${lecture.course.semester}}"></span> |
                                                <i class="fas fa-edit"></i>
                                                <div th:replace="fragments/format-resource-date.html:: formatDate(field=${lecture.dateModified})" text="ημερομηνία ενημέρωσης"></div> |
                                                <span th:if="${lecture.realDuration != null}">
                                                             <i class="far fa-clock"></i> <span th:text="${lecture.realDuration}" text="διάρκεια"></span>
                                                         </span>
                                                <span th:unless="${lecture.realDuration != null}" class="xxx">
                                                                 <span th:if="${lecture.resourceAccess != null}">
                                                                    <i class="far fa-clock"></i> <span th:text="${lecture.resourceAccess.duration}" text="διάρκεια"></span>
                                                                 </span>
                                                </span> |
                                                <i class="fas fa-eye"></i> <span th:text="${lecture.statistics}" text="εμφανίσεις"></span>
                                            </div>
                                        </div>
                                        <div th:if="${lecture.getEvent != null}" style="color: maroon" class="mb-2 font-weight-bolder">
                                            <span th:text="${lecture.getEvent.title}"></span>
                                            <div th:if="${lecture.getEvent.responsibleUnit != null}" style="color:black">
                                                    <span>Οργάνωση: </span>
                                                     <span th:each="unit,iStat: ${lecture.getEvent.responsibleUnit}">
                                                         <span th:text="${iStat.first}? '' : ', '"></span>
                                                         <span th:if="${#strings.trim(unit.structureType) == 'DEPARTMENT'}"> Τμήμα</span>
                                                         <span th:if="${#strings.trim(unit.structureType) == 'SCHOOL'}"> Σχολή </span>
                                                         <span th:text="${unit.title + ' '}"></span>
                                                     </span>
                                            </div>
                                            <div th:if="${lecture.getEvent.responsiblePerson != null}" style="color:black" class="mb-2">
                                                    <span th:text="${'Υπεύθυνος: ' + lecture.getEvent.responsiblePerson.name + ', ' + lecture.getEvent.responsiblePerson.affiliation }"></span>
                                            </div>
                                            <div th:text="${lecture.description}"  style="font-weight: normal;font-style: italic" class="text-muted mt-2"></div>
                                            <div class="mt-3" style="color: black">
                                                <i class="fas fa-edit"></i>
                                                <div th:replace="fragments/format-resource-date.html:: formatDate(field=${lecture.dateModified})" text="ημερομηνία ενημέρωσης"></div> |
                                                <span th:if="${lecture.realDuration != null}">
                                                             <i class="fas fa-video"></i> <span th:text="${lecture.realDuration}" text="διάρκεια"></span>
                                                         </span>
                                                <span th:unless="${lecture.realDuration != null}" class="xxx">
                                                                 <span th:if="${lecture.resourceAccess != null}" text="διάρκεια">
                                                                    <i class="fas fa-video"></i> <span th:text="${lecture.resourceAccess.duration}"  text="διάρκεια"></span>
                                                                 </span>
                                                         </span> |
                                                <i class="fas fa-eye"></i> <span title="εμφανίσεις" th:text="${lecture.statistics}"></span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-3 col-md-12">
                                        <div>
                                            <a class="btn btn-sm blue-btn-wcag-bgnd-color" data-toggle="modal" th:attr="data-lec=${lecture.id}" data-target="#resource_view_modal"
                                               style="margin-bottom:2px;color:white">
                                                <i class="fas fa-info-circle"></i>
                                            </a> Πληροφορίες
                                        </div>
                                        <div>
                                            <a class="btn btn-sm blue-btn-wcag-bgnd-color" style="margin-bottom:2px;color:white" th:href="@{/admin/lecture-editor(id=${lecture.id})}">
                                                <i class="fas fa-edit"></i>
                                            </a> Επεξεργασία
                                        </div>
                                        <div>
                                            <a class="btn btn-sm blue-btn-wcag-bgnd-color" style="margin-bottom:2px;color:white" target="_blank"
                                               th:href="@{/player(id=${lecture.id})}">
                                                <i class="fas fa-play"></i>
                                            </a> Αναπαραγωγή
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
    </div>
</div>

let video_playing_index=0,crossDomain_option=!1,movie_h=0,active_slide_h=0,go_to_time_refresh=1,go_to_slide_refresh=1;cuepoints_c=[];let cuepoints_m=[];cut_end_in_sec=[];let clip_start=-1,clip_end=-1;cuepointsx=[],cuepointsx_m=[],slide_at=[],slide_titles=[],cuepointsx_noslides=[],slide_at_noslides=[],slide_titles_noslides=[];let info,actions,pp,video_aspectratio,overlay_activation_status,lecture_presenter,title,date_txt,description,lecture_header,lecture_serie,lecture_duration,logo,lecture_real_duration,jwplayer_captions=[],captions_default_lang=1,basepath_subs="",debug=0,sync_events_flag=1,mode="sync_on",subs_mode="off",global_vid_duration=-1,clip_duration=-1,provider_type="",video_url="",video_url_webm="",intro_url="",intro_url_web="",basepath="",number_of_total_slides=0,slide_to_be_loaded="",playlist_array=[],production_mode=1,webRoot="",presentation_file="presentation.xml",slides_file="slideSync.xml",cuts_file="cuts.xml",subs_file="subs.xml",clip_file="clip.xml",subs_loaded=0,cuts_loaded=0,clip_loaded=0,slides_loaded=0,current_vid_sec=-1;var fullscreen;function reformat_date(e){let t=e.split("-");return t[2]+"-"+t[1]+"-"+t[0]}function read_parameters_XML(){$.ajax({type:"GET",url:presentation_file,dataType:"xml",crossDomain:crossDomain_option,cache:!1,success:function(e){logo=$(e).find("logo").text(),title=$(e).find("title:first").text(),$(document).attr("title",title),date_txt=reformat_date($(e).find("date").text()),description=$(e).find("description:first").text(),provider_type=$(e).find("provider").text(),video_url=$(e).find("resource[format=MP4]").text(),video_url_webm=$(e).find("resource[format=WEBM]").text(),intro_url=$(e).find("intro[format=MP4]").text(),intro_url_webm=$(e).find("intro[format=WEBM]").text(),lecture_header=$(e).find("header").text(),lecture_serie=$(e).find("serie").text(),lecture_presenter=$(e).find("presenter").text(),lecture_duration=$(e).find("duration").text(),global_vid_duration=convert_hh_mm_ss_format(lecture_duration),""===(lecture_real_duration=$(e).find("real_duration").text())&&(lecture_real_duration=lecture_duration),"0:0"===(video_aspectratio=$(e).find("aspectratio").text())&&(video_aspectratio="4:3"),overlay_activation_status=$(e).find("overlay").text()},complete:function(){read_subs_XML();let e=setInterval(function(){1===subs_loaded&&(clearInterval(e),load_player(),debug&&console.log("playlist_array length:"+playlist_array.length))},200),t=setInterval(function(){if(1===playermetadataloaded&&(clearInterval(t),!introPlaying())){fix_ui(title,date_txt,logo,lecture_real_duration,description,lecture_header,lecture_serie,lecture_presenter);let e=setInterval(function(){1===playermetadataloaded&&(clearInterval(e),-1===clip_file?read_cuts_XML():-1!==clip_file&&read_clip_XML())},200);if(-1!==clip_file){let e=setInterval(function(){1===clip_loaded&&(clearInterval(e),read_cuts_XML())},200)}let t=setInterval(function(){1===cuts_loaded&&(clearInterval(t),read_slides_XML())},200)}},200),i=setInterval(function(){1===slides_loaded&&(clearInterval(i),"audio"===provider_type&&2!==playlist_array.length||$("#dvLoading").hide())},200)}})}function load_player(){let e="";"audio"!==provider_type&&"rtmp-audio"!==provider_type||(e=webRoot+"/resources/richLecture_addons/css/images_player/AudioOnly.jpg",jwplayer_captions=[]),playlist_array="-1"===intro_url?"-1"!==video_url_webm?[{sources:[{file:video_url},{file:video_url_webm}],tracks:jwplayer_captions,image:e}]:[{sources:[{file:video_url}],tracks:jwplayer_captions,image:e}]:"-1"!==intro_url_webm&&"-1"!==video_url_webm?[{sources:[{file:intro_url},{file:intro_url_webm}]},{sources:[{file:video_url},{file:video_url_webm}],tracks:jwplayer_captions,image:e}]:[{sources:[{file:intro_url}]},{sources:[{file:video_url}],tracks:jwplayer_captions,image:e}],init_HTML5();let t=lecture_serie;-1!==lecture_presenter&&(t=lecture_serie+"<br/>"+lecture_presenter.replace(",",", "))}function read_subs_XML(){$.ajax({type:"GET",url:subs_file,crossDomain:crossDomain_option,cache:!1,dataType:"xml",success:function(e){basepath_subs=$(e).find("basepath").text();let t=1;$(e).find("sub").each(function(){let e=$(this).find("url").text(),i=e.split(".")[0].split("-")[0].replace("sub_","");jwplayer_captions.push(new Object({file:basepath_subs+e,label:i.toUpperCase()})),i===language.selectedLang&&(captions_default_lang=t),t++}),subs_loaded=1}})}function read_clip_XML(){$.ajax({type:"GET",url:clip_file,dataType:"xml",crossDomain:crossDomain_option,cache:!1,success:function(e){title=$(e).find("title:first").text(),description=$(e).find("description").text(),overlay_activation_status=$(e).find("overlay").text(),lecture_presenter=$(e).find("presenter").text(),$(document).attr("title",title),$(".header-item").html(title+" | "+date_txt),-1!==$(e).find("clip_starttime").text()&&(clip_start=convert_hh_mm_ss_format($(e).find("clip_starttime").text())),-1!==$(e).find("clip_endtime").text()&&(clip_end=convert_hh_mm_ss_format($(e).find("clip_endtime").text())),-1!==$(e).find("clip_duration").text()&&($("#lecture_duration span").html($(e).find("clip_duration").text()),clip_duration=convert_hh_mm_ss_format($(e).find("clip_duration").text())),$("#lecture_title span").html(title),$("#lecture_description span").html(description);let t=lecture_serie;-1===lecture_presenter?$("#lecture_presenter").remove():($("#lecture_presenter span").html(lecture_presenter),t=t+"<br/>"+lecture_presenter.replace(",",", ")),$("#jwplayer_overlay").html(t),clip_loaded=1}})}function read_cuts_XML(){debug&&console.log("READ CUTS"),$.ajax({type:"GET",url:cuts_file,crossDomain:crossDomain_option,cache:!1,dataType:"xml",success:function(e){let t=$(e).find("clips"),i=$(e).find("trims");end_sec=-1,i.find("start").each(function(){begin_sec=$(this).find("begin").text(),end_sec=$(this).find("end").text(),begin_sec=convert_hh_mm_ss_format(begin_sec),end_sec=convert_hh_mm_ss_format(end_sec),cut_end_in_sec[1e3*begin_sec]=end_sec,cuepoints_c.push(1e3*begin_sec),introPlaying()||(cuepoints_m.addCue(new window.VTTCue(begin_sec,end_sec,"trim start")),debug&&console.log("TRIM START ADD:"+begin_sec+"->"+end_sec))}),clip_start>end_sec&&0!==clip_start&&-1!==clip_start&&(cut_end_in_sec[0]=clip_start,-1===end_sec&&cuepoints_c.push(0)),begin_sec=global_vid_duration,i.find("finish").each(function(){begin_sec=$(this).find("begin").text(),end_sec=$(this).find("end").text(),begin_sec=convert_hh_mm_ss_format(begin_sec),end_sec=convert_hh_mm_ss_format(end_sec),cut_end_in_sec[1e3*begin_sec]=end_sec,cuepoints_c.push(1e3*begin_sec),introPlaying()||(cuepoints_m.addCue(new window.VTTCue(begin_sec,end_sec,"trim finish")),debug&&console.log("TRIM FINISH ADD:"+begin_sec+"->"+end_sec))}),clip_end<begin_sec&&-1!==clip_end&&(begin_sec!==global_vid_duration&&(cut_end_in_sec.splice(cut_end_in_sec.indexOf(end_sec),1),cuepoints_c.splice(cuepoints_c.indexOf(1e3*begin_sec),1)),cut_end_in_sec[1e3*clip_end]=global_vid_duration,cuepoints_c.push(1e3*clip_end)),t.find("cut").each(function(){begin_sec=$(this).find("begin").text(),end_sec=$(this).find("end").text(),begin_sec=convert_hh_mm_ss_format(begin_sec),end_sec=convert_hh_mm_ss_format(end_sec),end_sec<=clip_start&&-1!==clip_start||begin_sec>=clip_end&&-1!==clip_end||(begin_sec<clip_start&&end_sec>clip_start&&-1!==clip_start?cut_end_in_sec[0]=end_sec:begin_sec<clip_end&&end_sec>clip_end&&-1!==clip_end?(cuepoints_c.splice(cuepoints_c.indexOf(cut_end_in_sec.indexOf(global_vid_duration)),1),cut_end_in_sec.splice(cut_end_in_sec.indexOf(global_vid_duration),1),cut_end_in_sec[1e3*begin_sec]=global_vid_duration,cuepoints_c.push(1e3*begin_sec)):(cut_end_in_sec[1e3*begin_sec]=end_sec,cuepoints_c.push(1e3*begin_sec),introPlaying()||(cuepoints_m.addCue(new window.VTTCue(begin_sec,end_sec,"new cut")),debug&&console.log("CUT ADD:"+begin_sec+"->"+end_sec))))}),cuts_loaded=1}})}function read_slides_XML(){debug&&console.log("read slides");let e=0,t=0,i=0;$.ajax({type:"GET",url:slides_file,crossDomain:crossDomain_option,dataType:"xml",cache:!1,success:function(n){if(basepath=$(n).find("basepath").text(),$(n).find("slide").each(function(){i=1;let n=$(this).find("url").text();n=basepath+n;let s=$(this).find("time").text(),o=$(this).find("title").text();if(o.length||(o=language.s4),"-1"!==s){times=s.split(",");for(let t=0;t<times.length;t++)(s=convert_hh_mm_ss_format(times[t]))<global_vid_duration&&(cuepointsx.push(1e3*s),slide_at[1e3*s]=n,slide_titles[1e3*s]=o,e++)}else cuepointsx_noslides.push(1e3*t),slide_at_noslides[1e3*t]=n,slide_titles_noslides[1e3*t]=o,t++}),!introPlaying()){for(let e=0;e<cuepointsx.length;e++){let t,i=cuepointsx[e]/1e3,n=i;t=e<cuepointsx.length-1?cuepointsx[e+1]/1e3-1:global_vid_duration;let s='{ "url" : "'+slide_at[1e3*i]+'", "title" : "'+slide_titles[1e3*i]+'", "pos" : '+e+"}";cuepointsx_m.addCue(new window.VTTCue(n,t,s))}if(debug&&console.log("SLIDE CUE"),void 0!==cuepointsx_m.cues)for(let e=0;e<cuepointsx_m.cues.length;e++){let t=cuepointsx_m.cues[e];debug&&console.log("cue:"+e+"   start:"+t.startTime+"("+secondsTimeSpanToHMS(t.startTime)+")     end:"+t.endTime+"("+secondsTimeSpanToHMS(t.endTime)+")")}}if(0===i)return $("#resize_icon").remove(),$("#active_slide").remove(),$(".right_sidebar").remove(),$(".main_content").width("100%"),$("#slides_exist").remove(),$(".main_content").css("position","absolute"),$(".main_content").css("display","block"),$(".main_content").css("top","10%"),$(".main_content").css("left","20%"),mode="sync_off",slides_loaded=1,!1;if(0===e)$("[name='sync_mode']").bootstrapSwitch("disabled",!1),$("[name='sync_mode']").bootstrapSwitch("toggleState"),$("[name='sync_mode']").bootstrapSwitch("disabled",!0),sync_events_flag=0,e=t,cuepointsx=cuepointsx_noslides,slide_at=slide_at_noslides,slide_titles=slide_titles_noslides;else if(0===clip_duration)e=0,cuepointsx=[];else{cuepointsx=cuepointsx.sort(function(e,t){return e-t});for(let t=0;t<cuepointsx.length;t++)for(let i=0;i<cuepoints_c.length;i++)t===cuepointsx.length-1?cuepointsx[t]>=cuepoints_c[i]&&global_vid_duration===cut_end_in_sec[cuepoints_c[i]]&&(cuepointsx.splice(t,1),e--,t--):cuepointsx[t]>=cuepoints_c[i]&&cuepointsx[t+1]<=1e3*cut_end_in_sec[cuepoints_c[i]]&&(cuepointsx.splice(t,1),e--,t--)}if(0===cuepointsx.length)return $("#resize_icon").remove(),$("#active_slide").remove(),$(".right_sidebar").remove(),$(".main_content").width("100%"),$("#slides_exist").remove(),mode="sync_off",slides_loaded=1,!1;for(let e=0;e<cuepointsx.length;e++){let t=slide_at[cuepointsx[e]].lastIndexOf("/");url_for_scroll_bar=slide_at[cuepointsx[e]].substr(0,t+1)+"small/"+slide_at[cuepointsx[e]].substr(t+1),$('<div class="scroll-content-item" id="scroll-content-item-'+cuepointsx[e]/1e3+'"></div>').html('<img alt="'+(e+1)+" "+slide_titles[cuepointsx[e]]+'" src="'+url_for_scroll_bar+'" title="'+(e+1)+" "+slide_titles[cuepointsx[e]]+'" ><div class="scroll-content-img-number">'+(e+1)+'</div><div class="scroll-content-img-title">'+slide_titles[cuepointsx[e]]+"</div>").appendTo($(".scroll-content"))}$(".scroll-content").disableSelection(),number_of_total_slides=e,$(".scroll-pane").animate({scrollTop:0}),$(".go_to_slide").val("00"),$("#num_of_slides").html(number_of_total_slides),scroll_area_img_height=0,$(".scroll-content").children().each(function(){scroll_area_img_height+=$(this).outerHeight()}),$(".scroll-content").css("height",scroll_area_img_height+"px"),$(".scroll-content-item").click(function(){let e=$(this).find("img").attr("src");if(e=e.replace("small/",""),"sync_off"===mode){let t=$("#active_slide img");t.attr("src")!==e&&(t.css("opacity",.3),t.attr("src",e).fadeTo("normal",1),slide_to_be_loaded=$(".scroll-content-item").index(this),set_active_img($(this)))}else{let t=$("#active_slide img");t.attr("src")!==e&&(t.css("opacity",.3),t.attr("src",e).fadeTo("normal",1),slide_to_be_loaded=$(".scroll-content-item").index(this),set_active_img($(this)));let i=$(this).attr("id").replace("scroll-content-item-","");getVideo().currentTime=i}}),slides_loaded=1}})}function set_active_img(e){1===go_to_slide_refresh&&$(".go_to_slide").val($(e).find($(".scroll-content-img-number")).html()),go_slider_to=$(".scroll-pane").scrollTop()+$(e).offset().top-($(".header").height()+parseInt($("#contentwrapper").css("marginTop").replace("px",""),10)+parseInt($(e).css("marginBottom").replace("px",""),10)+2*parseInt($(e).css("marginTop").replace("px",""))+e.prev().height()),$(".scroll-content-item").removeClass("active"),$(e).addClass("active"),$(".scroll-pane").animate({scrollTop:go_slider_to})}function convert_hh_mm_ss_format(e){switch(broken_time=e.split(":"),hours=minutes=seconds=0,broken_time.length){case 1:seconds=parseFloat(broken_time[0]);break;case 2:minutes=parseFloat(broken_time[0]),seconds=parseFloat(broken_time[1]);break;case 3:hours=parseFloat(broken_time[0]),minutes=parseFloat(broken_time[1]),seconds=parseFloat(broken_time[2])}return Math.round(seconds+60*minutes+3600*hours)}function secondsTimeSpanToHMS(e){let t=Math.floor(e/3600);e-=3600*t;let i=Math.floor(e/60);return(t<10?"0"+t:t)+":"+(i<10?"0"+i:i)+":"+((e-=60*i)<10?"0"+e:e)}function make_main_content_resizable(){$("#active_slide").resizable({handles:{e:$("#resize_icon")},aspectRatio:!0,alsoResizeReverse:"#movie",maxWidth:800,minWidth:200,start:function(){movie_h=$("#movie").css("height"),active_slide_h=$("#active_slide").css("height")},resize:function(){$("#movie").css("height",movie_h),$("#active_slide").css("height",active_slide_h),$("#next_slide").css("left",$("#active_slide").width()-45+"px")}}),$("#movie").resizable({handles:{e:"",w:""},aspectRatio:!0,maxWidth:720,minWidth:200})}function make_components_responsive(){$("#next_slide").css("left",$("#active_slide").width()-45+"px"),$(window).resize(function(){let e;e&&clearTimeout(e),e=setTimeout(function(){if(e=null,$("#movie").css("height",movie_h),$("#active_slide").css("height","100%"),$("#next_slide").css("left",$("#active_slide").width()-45+"px"),scroll_area_img_height=0,$(".scroll-content").children().each(function(){scroll_area_img_height+=$(this).outerHeight()}),$(".scroll-content").height(scroll_area_img_height),$(".header-item").css("width",$(".header").width()-800),$("#contentwrapper").css("width").replace("px","")===$("#contentwrapper").css("maxWidth").replace("px","")){$("#contentwrapper").addClass("contentwrapper_max");let e=$(window).width()-$("#contentwrapper").css("maxWidth").replace("px","");$("#contentwrapper").css("left",e/2-15)}else $("#contentwrapper").removeClass("contentwrapper_max"),$("#contentwrapper").css("left",0)},500)})}function scroll_bar_mousewheel(){$(".scroll-pane").mousewheel()}function load_menu_events(){let e=$("#contentwrapper");if(e.css("width").replace("px","")===e.css("maxWidth").replace("px","")){e.addClass("contentwrapper_max");let t=$(window).width()-e.css("maxWidth").replace("px","");e.css("left",t/2-15)}else e.removeClass("contentwrapper_max"),e.css("left",0);$("[name='sync_mode']").bootstrapSwitch(),$("[name='sync_mode']").on("switchChange",function(){if($(this).prop("checked")){mode="sync_on",time_to_go=1e3*Math.round(getVideo().currentTime),total_num_of_slides=cuepointsx.length;let e=-1;for(let t=0;t<total_num_of_slides;t++){if(time_to_go>=cuepointsx[total_num_of_slides-1]){e=total_num_of_slides-1;break}if(cuepointsx[t]<=time_to_go&&time_to_go<cuepointsx[t+1]){e=t;break}}slide_to_be_loaded=$(".scroll-content-item img").index($("#scroll-content-item-"+cuepointsx[e]/1e3+" img"));let t=slide_at[cuepointsx[e]],i=$("#active_slide img");i.attr("src")!==t&&(i.css("opacity",.3),i.attr("src",t).fadeTo("normal",1),set_active_img($("#scroll-content-item-"+cuepointsx[e]/1e3)))}else mode="sync_off"}),$("#slidesButton").click(function(){$(this).addClass("btn-primary"),$("#titlesButton").removeClass("btn-primary"),$("#titlesButton").addClass("btn-default"),$(".scroll-content-item img").show(),$(".scroll-content-img-title").hide(),scroll_area_img_height=0,$(".scroll-content").children().each(function(){scroll_area_img_height+=$(this).outerHeight()}),$(".scroll-content").height(scroll_area_img_height),set_active_img($("#"+$(".scroll-content-item").filter(".active").attr("id")))}),$("#titlesButton").click(function(){$(this).addClass("btn-primary"),$("#slidesButton").removeClass("btn-primary"),$("#slidesButton").addClass("btn-default"),$(".scroll-content-item img").hide(),$(".scroll-content-img-title").show(),scroll_area_img_height=0,$(".scroll-content").children().each(function(){scroll_area_img_height+=$(this).outerHeight()}),$(".scroll-content").height(scroll_area_img_height),set_active_img($("#"+$(".scroll-content-item").filter(".active").attr("id")))}),$("[name='sync_mode']").bootstrapSwitch("disabled",!0),$("button").prop("disabled",!0),$("input").prop("disabled",!0),$("#active_slide").disableSelection(),$("#previous_slide").disableSelection(),$("#next_slide").disableSelection(),$("#active_slide").mouseenter(function(){$("#previous_slide").show(),$("#next_slide").show()}),$("#active_slide").mouseleave(function(){$("#previous_slide").hide(),$("#next_slide").hide()}),$("#previous_slide").click(function(){$(".scroll-content-item").filter(".active").prev().click()}),$("#next_slide").click(function(){$(".scroll-content-item").filter(".active").next().click()})}function define_actions(){actions={go_to_time:function(){let e=$(".go_to_time").val(),t=convert_hh_mm_ss_format(e),i=e.split(":");8===e.length&&t<global_vid_duration&&3===i.length&&2===i[0].length&&2===i[1].length&&2===i[2].length&&$.isNumeric(i[0])&&$.isNumeric(i[1])&&$.isNumeric(i[2])&&i[0]<60&&i[1]<60&&i[2]<60&&(getVideo().currentTime=t)},go_to_slide:function(){initial_slide_num=$(".scroll-content-item.active").children(".scroll-content-img-number").html();let e=$(".go_to_slide").val();$.isNumeric(e)&&e>0&&e<=number_of_total_slides?"sync_on"===mode?getVideo().currentTime=cuepointsx[e-1]/1e3:$(".scroll-content-item").eq(e-1).click():$(".go_to_slide").val(initial_slide_num)},play:function(){toggle_play()},stop:function(){stop_play()},rewind:function(){rewind_play()},forward:function(){forward_play()},mute:function(){toggle_mute()},volup:function(){volume_up()},voldown:function(){volume_down()},fullscreen:function(){full_screen()}}}function go_to_time_func(){$(".go_to_time").click(function(){go_to_time_refresh=0}),$(".go_to_time").focus(function(){go_to_time_refresh=0}),$(".go_to_time").select(function(){go_to_time_refresh=0}),$(".go_to_time").focusout(function(){go_to_time_refresh=1}),$(".go_to_time").bind("keyup",function(e){13===e.keyCode?(actions.go_to_time(),go_to_time_refresh=1):go_to_time_refresh=27===e.keyCode?1:0}),setInterval(function(){if(1===go_to_time_refresh&&void 0!==getVideo()){time_now=getVideo().currentTime;let e=secondsTimeSpanToHMS(Math.round(time_now));$(".go_to_time").val(e),introPlaying()?$(".show_current_time").html(e+" / "+getVideo().duration+" <span class='text-muted'> - CC License </span>"):$(".show_current_time").html(e+" / "+secondsTimeSpanToHMS(Math.round(global_vid_duration)))}},1e3)}function go_to_slide_func(){$(".go_to_slide").click(function(){go_to_slide_refresh=0}),$(".go_to_slide").focus(function(){go_to_slide_refresh=0}),$(".go_to_slide").select(function(){go_to_slide_refresh=0}),$(".go_to_slide").focusout(function(){go_to_slide_refresh=1,initial_slide_num=$(".scroll-content-item.active").children(".scroll-content-img-number").html(),$(".go_to_slide").val(initial_slide_num)}),$(".go_to_slide").bind("keyup",function(e){13===e.keyCode?(actions.go_to_slide(),go_to_slide_refresh=1):27===e.keyCode?(go_to_slide_refresh=1,initial_slide_num=$(".scroll-content-item.active").children(".scroll-content-img-number").html(),$(".go_to_slide").val(initial_slide_num)):go_to_slide_refresh=0})}function getRootWebSitePath(){let e=document.location.toString(),t=e.indexOf("/",e.indexOf("://")+3),i=e.substring(0,t)+"/",n=e.indexOf("/",e.indexOf(i)+i.length);return e.substring(0,n)}function introPlaying(){return 2===playlist_array.length&&0===video_playing_index}function onPlay(){$(".global_time").html(secondsTimeSpanToHMS(global_vid_duration)),introPlaying()?(mode="sync_off",$("[name='sync_mode']").bootstrapSwitch("disabled",!0),$("button").prop("disabled",!0),$("input").prop("disabled",!0),$("#playPauseVideoBt").prop("disabled",!1)):(1===sync_events_flag&&0!==$("[name='sync_mode']").length&&(mode="sync_on",$("[name='sync_mode']").bootstrapSwitch("disabled",!1),$("[name='sync_mode']").bootstrapSwitch("state",!0,!0)),$("button").prop("disabled",!1),$("input").prop("disabled",!1)),$("#playPauseVideoBt").focus()}function onSeek(){for(curr_time=1e3*getVideo().currentTime,curr_time+=1,i=0;i<cuepoints_c.length;i++)if(cuepoints_c[i]<=curr_time){let e=1e3*cut_end_in_sec[cuepoints_c[i]];if(curr_time-e<=0){if(e/1e3<global_vid_duration){let t=setInterval(function(){!1===getVideo().paused&&(clearTimeout(t),getVideo().currentTime=e/1e3)},100);return!1}{let e=setInterval(function(){!1!==getVideo().paused&&1!==getVideo().readyState||(clearTimeout(e),getVideo().paused=!0)},100);return!1}}}}function fix_ui(e,t,i,n,s,o,l,c){$('<div class="header-item"></div>').html(e+" | "+t).prependTo($(".header")),$('<div class="header-logo"><img alt="Institution logo" src="'+i+'"></img></div>').prependTo($(".header")),"event:"===o.substring(0,6)&&(o=o.substring(6,o.length),$("#lecture_department").html(language.p1+"<span></span>"),$("#lecture_serie").html(language.p2+"<span></span>")),$(".header-item").css("width",$(".header").width()-800),$("#show_lecture_info").dialog({autoOpen:!1,modal:!0,width:"500",resizable:!1,draggable:!1,position:{my:"center",at:"center",of:window},buttons:{Close:function(){$(this).dialog("close")}}}),$(".ui-dialog-titlebar-close").remove(),$("#lecture_title span").html(e),$("#lecture_date span").html(t),$("#lecture_duration span").html(n),$("#lecture_description span").html(s),$("#lecture_department span").html(o),$("#lecture_serie span").html(l),-1===c?$("#lecture_presenter").remove():$("#lecture_presenter span").html(c),$(".icon-info").parent().click(function(){$("#show_lecture_info").dialog("open")})}$(document).ready(function(){webRoot=getRootWebSitePath(),fullscreen=document.getElementById("fs"),info=document.getElementById("info"),presentation_file=webRoot+"/services/presentationplayer/",slides_file=webRoot+"/services/slides/",cuts_file=webRoot+"/services/cuts/",subs_file=webRoot+"/services/subs/",clip_file=webRoot+"/services/clip/",1===production_mode&&(vid_lecture_params=window.location.search.replace("?",""),vid_lecture_id_args=vid_lecture_params.split("&"),1===vid_lecture_id_args.length?(vid_lecture_id=window.location.search.replace("?rid=",""),presentation_file+=vid_lecture_id,slides_file+=vid_lecture_id,cuts_file+=vid_lecture_id,subs_file+=vid_lecture_id,clip_file=-1):(vid_lecture_id=vid_lecture_id_args[0].replace("rid=",""),presentation_file+=vid_lecture_id,cuts_file+=vid_lecture_id,subs_file+=vid_lecture_id,slides_file+=vid_lecture_id,clip_lecture_id=vid_lecture_id_args[1].replace("clip=",""),clip_file+=clip_lecture_id)),load_menu_events(),define_actions(),go_to_time_func(),go_to_slide_func(),read_parameters_XML(),$(this).bind("contextmenu",function(e){return!1}),scroll_bar_mousewheel(),make_main_content_resizable(),make_components_responsive(),setInterval(function(){introPlaying()||void 0===getVideo()||(time_now=getVideo().currentTime,$(".go_to_field").html(secondsTimeSpanToHMS(Math.round(time_now))))},1e3),document.getElementById("playPauseVideoBt").focus(),$("#contentwrapper").focusin(function(){$(".video-controls").css("border","1px solid silver")}),$("#contentwrapper").focusout(function(){$(".video-controls").css("border","0")}),$("#contentwrapper").on("keydown",function(e){if(!introPlaying()){switch(debug&&console.log("You downed a key!"+e.which),e.which){case 40:volume_down();break;case 38:volume_up();break;case 77:toggle_mute();break;case 70:toggleFullScreen();break;case 37:rewind_play();break;case 39:forward_play();break;default:return}e.preventDefault()}})});
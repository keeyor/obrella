cuepoints_for_cutted_section=[];seek_times=[];var pp_cut;var webRoot="";function secondsTimeSpanToHMS(s){var h=Math.floor(s/3600);s-=h*3600;var m=Math.floor(s/60);s-=m*60;return(h<10?'0'+h:h)+":"+(m<10?'0'+m:m)+":"+(s<10?'0'+s:s);}
function getURLParameters(url)
{var result={};var searchIndex=url.indexOf("?");if(searchIndex==-1)
return result;var sPageURL=url.substring(searchIndex+1);var sURLVariables=sPageURL.split('&');for(var i=0;i<sURLVariables.length;i++)
{var sParameterName=sURLVariables[i].split('=');result[sParameterName[0]]=sParameterName[1];}
return result;}
function getRootWebSitePath()
{var _location=document.location.toString();var applicationNameIndex=_location.indexOf('/',_location.indexOf('://')+3);var applicationName=_location.substring(0,applicationNameIndex)+'/';var webFolderIndex=_location.indexOf('/',_location.indexOf(applicationName)+applicationName.length);var webFolderFullPath=_location.substring(0,webFolderIndex);return webFolderFullPath;}
function load_player(video_url,video_duration,provider_type){pp_cut=$f("player_cut",{src:webRoot+"/resources/richLecture_addons/js/ext_js/flowplayer/flowplayer-3.2.16.swf",wmode:"opaque"},{plugins:{audio:{url:webRoot+'/resources/richLecture_addons/js/ext_js/flowplayer/flowplayer.audio-3.2.11.swf'},pseudo:{url:webRoot+'/resources/richLecture_addons/js/ext_js/flowplayer/flowplayer.pseudostreaming-3.2.12.swf'}},clip:{coverImage:{url:webRoot+"/resources/richLecture_addons/css/images_editor/AudioOnly.jpg",scaling:'fit'},autoPlay:true,autoBuffering:true,provider:provider_type,url:video_url,scaling:'fit',onCuepoint:[cuepoints_for_cutted_section,function(clip,point){if(cuepoints_for_cutted_section[0]==point){if(seek_times[point]/1000.0==video_duration)
this.stop();else
this.seek(seek_times[point]/1000.0);}else
this.stop();}],onSeek:function(){curr_time=Math.round(this.getTime())*1000;curr_time+=1;if(cuepoints_for_cutted_section.length==1){if(cuepoints_for_cutted_section[0]<curr_time)
this.stop()}
else if(seek_times[cuepoints_for_cutted_section[0]]>(curr_time+2000)||cuepoints_for_cutted_section[1]<curr_time){this.stop()}}}});}
$(document).ready(function(){webRoot=getRootWebSitePath();var url_params=getURLParameters(document.URL);var video_url=url_params['id'];var video_duration=url_params['duration'];var video_start_sec=url_params['start'];var video_end_sec=url_params['end'];var provider_type=url_params['provider'];$(".cutted_pediod_time").html(secondsTimeSpanToHMS(video_start_sec)+' - '+secondsTimeSpanToHMS(video_end_sec));if(video_start_sec==0){cuepoints_for_cutted_section.push(video_end_sec*1000);seek_times[video_end_sec*1000]=video_duration*1000;}else{cuepoints_for_cutted_section.push(0);seek_times[0]=video_start_sec*1000;cuepoints_for_cutted_section.push(video_end_sec*1000);seek_times[video_end_sec*1000]=video_duration*1000;}
load_player(video_url,video_duration,provider_type);});